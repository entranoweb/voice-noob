var VoiceAgentWidget=function(t){"use strict";const n='\n  .va-widget-container {\n    position: fixed;\n    z-index: 9999;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n  }\n\n  .va-widget-container.bottom-right {\n    bottom: 20px;\n    right: 20px;\n  }\n\n  .va-widget-container.bottom-left {\n    bottom: 20px;\n    left: 20px;\n  }\n\n  .va-widget-container.top-right {\n    top: 20px;\n    right: 20px;\n  }\n\n  .va-widget-container.top-left {\n    top: 20px;\n    left: 20px;\n  }\n\n  .va-widget-button {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 12px 20px;\n    background: var(--va-primary, #6366f1);\n    color: white;\n    border: none;\n    border-radius: 50px;\n    cursor: pointer;\n    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15), 0 0 0 0 var(--va-glow-color, rgba(99, 102, 241, 0));\n    transition: all 0.3s ease;\n    font-size: 14px;\n    font-weight: 500;\n  }\n\n  .va-widget-button:hover {\n    transform: scale(1.05);\n    box-shadow: 0 6px 32px rgba(0, 0, 0, 0.2), 0 0 16px 4px var(--va-glow-color, rgba(99, 102, 241, 0.3));\n  }\n\n  .va-widget-button:active {\n    transform: scale(0.98);\n  }\n\n  .va-widget-button svg {\n    width: 18px;\n    height: 18px;\n  }\n\n  .va-widget-orb {\n    width: 36px;\n    height: 36px;\n    border-radius: 50%;\n    position: relative;\n    overflow: hidden;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n  }\n\n  .va-widget-orb-gradient {\n    position: absolute;\n    inset: 0;\n    border-radius: 50%;\n    background: conic-gradient(\n      from 180deg,\n      var(--va-primary, #6366f1) 0deg,\n      var(--va-primary-60, #6366f188) 90deg,\n      var(--va-primary-30, #6366f144) 180deg,\n      var(--va-primary-60, #6366f188) 270deg,\n      var(--va-primary, #6366f1) 360deg\n    );\n    transition: opacity 0.3s ease;\n  }\n\n  .va-widget-orb-gradient.animated {\n    animation: va-spin 3s linear infinite;\n  }\n\n  .va-widget-orb-inner {\n    position: absolute;\n    inset: 3px;\n    border-radius: 50%;\n    background: white;\n    transition: background-color 0.3s ease;\n  }\n\n  .va-widget-orb-dot {\n    position: absolute;\n    inset: 6px;\n    border-radius: 50%;\n    background: var(--va-primary, #6366f1);\n    opacity: 0.4;\n    transition: all 0.2s ease;\n  }\n\n  .va-widget-orb-dot.active {\n    opacity: 0.8;\n    transform: scale(1.1);\n  }\n\n  /* State-based styling */\n  .va-widget-button.state-listening {\n    --va-glow-color: rgba(34, 197, 94, 0.4);\n    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15), 0 0 12px 4px var(--va-glow-color);\n  }\n\n  .va-widget-button.state-listening .va-widget-orb-dot {\n    background: #22c55e;\n    opacity: 0.9;\n    animation: va-pulse 1.5s ease-in-out infinite;\n  }\n\n  .va-widget-button.state-thinking {\n    --va-glow-color: rgba(251, 191, 36, 0.4);\n    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15), 0 0 12px 4px var(--va-glow-color);\n  }\n\n  .va-widget-button.state-thinking .va-widget-orb-dot {\n    background: #fbbf24;\n    opacity: 0.9;\n    animation: va-think-pulse 0.8s ease-in-out infinite;\n  }\n\n  .va-widget-button.state-speaking {\n    --va-glow-color: rgba(59, 130, 246, 0.4);\n    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15), 0 0 12px 4px var(--va-glow-color);\n  }\n\n  .va-widget-button.state-speaking .va-widget-orb-dot {\n    background: #3b82f6;\n    opacity: 0.9;\n    animation: va-speak-pulse 0.3s ease-in-out infinite;\n  }\n\n  .va-widget-popup {\n    position: absolute;\n    bottom: 60px;\n    right: 0;\n    width: 380px;\n    height: 520px;\n    background: transparent;\n    overflow: hidden;\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n    transition: all 0.3s ease;\n    pointer-events: none;\n  }\n\n  .va-widget-popup.open {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n    pointer-events: auto;\n  }\n\n  .va-widget-popup iframe {\n    width: 100%;\n    height: 100%;\n    border: none;\n  }\n\n  .va-widget-branding {\n    text-align: center;\n    font-size: 11px;\n    color: #9ca3af;\n    margin-top: 8px;\n  }\n\n  .va-widget-branding a {\n    color: var(--va-primary, #6366f1);\n    text-decoration: none;\n  }\n\n  @keyframes va-spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  @keyframes va-pulse {\n    0%, 100% { transform: scale(1); opacity: 0.9; }\n    50% { transform: scale(1.15); opacity: 1; }\n  }\n\n  @keyframes va-think-pulse {\n    0%, 100% { transform: scale(1); opacity: 0.7; }\n    50% { transform: scale(1.1); opacity: 1; }\n  }\n\n  @keyframes va-speak-pulse {\n    0%, 100% { transform: scale(1); }\n    50% { transform: scale(1.2); }\n  }\n\n  @media (max-width: 480px) {\n    .va-widget-popup {\n      position: fixed;\n      inset: 0;\n      width: 100%;\n      height: 100%;\n      border-radius: 0;\n      bottom: 0;\n      right: 0;\n    }\n  }\n';class e extends HTMLElement{constructor(){super(),this.isOpen=!1,this.agentId=null,this.position="bottom-right",this.theme="auto",this.buttonText="Voice Chat",this.baseUrl="",this.primaryColor="#6366f1",this.currentState="idle",this.messageHandler=null,this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["agent-id","position","theme","button-text","base-url","primary-color"]}attributeChangedCallback(t,n,e){switch(t){case"agent-id":this.agentId=e;break;case"position":this.position=e||"bottom-right";break;case"theme":this.theme=e||"auto";break;case"button-text":this.buttonText=e||"Voice Chat";break;case"base-url":this.baseUrl=e||"";break;case"primary-color":this.primaryColor=e||"#6366f1"}this.isConnected&&this.render()}connectedCallback(){this.agentId=this.getAttribute("agent-id"),this.position=this.getAttribute("position")??"bottom-right",this.theme=this.getAttribute("theme")??"auto",this.buttonText=this.getAttribute("button-text")??"Voice Chat",this.baseUrl=this.getAttribute("base-url")??this.detectBaseUrl(),this.primaryColor=this.getAttribute("primary-color")??"#6366f1",this.render(),this.messageHandler=t=>this.handleMessage(t),window.addEventListener("message",this.messageHandler)}disconnectedCallback(){this.messageHandler&&(window.removeEventListener("message",this.messageHandler),this.messageHandler=null)}detectBaseUrl(){var t;const n=document.getElementsByTagName("script");for(const e of n)if(null==(t=e.src)?void 0:t.includes("widget"))try{const t=new URL(e.src);return`${t.protocol}//${t.host}`}catch{}return window.location.origin}hexToHSL(t){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!(null==n?void 0:n[1])||!n[2]||!n[3])return{h:0,s:0,l:50};const e=parseInt(n[1],16)/255,a=parseInt(n[2],16)/255,i=parseInt(n[3],16)/255,o=Math.max(e,a,i),s=Math.min(e,a,i);let r=0,d=0;const g=(o+s)/2;if(o!==s){const t=o-s;switch(d=g>.5?t/(2-o-s):t/(o+s),o){case e:r=((a-i)/t+(a<i?6:0))/6;break;case a:r=((i-e)/t+2)/6;break;case i:r=((e-a)/t+4)/6}}return{h:Math.round(360*r),s:Math.round(100*d),l:Math.round(100*g)}}render(){var t;if(!this.agentId)return void console.error("VoiceAgent: agent-id attribute is required");const e=this.hexToHSL(this.primaryColor),a=`hsla(${e.h}, ${e.s}%, ${e.l}%, 0.53)`,i=`hsla(${e.h}, ${e.s}%, ${e.l}%, 0.27)`,o=n.replace(/var\(--va-primary, #6366f1\)/g,this.primaryColor).replace(/var\(--va-primary-60, #6366f188\)/g,a).replace(/var\(--va-primary-30, #6366f144\)/g,i);this.shadow.innerHTML=`\n      <style>\n        :host {\n          --va-primary: ${this.primaryColor};\n          --va-primary-60: ${a};\n          --va-primary-30: ${i};\n        }\n        ${o}\n      </style>\n      <div class="va-widget-container ${this.position}">\n        <div class="va-widget-popup" id="popup">\n          <iframe\n            src="${this.baseUrl}/embed/${this.agentId}?theme=${this.theme}&autostart=true"\n            allow="microphone"\n            title="Voice Agent"\n          ></iframe>\n        </div>\n        <div class="va-widget-button-wrapper">\n          <button class="va-widget-button" id="toggle">\n            <div class="va-widget-orb" id="orb">\n              <div class="va-widget-orb-gradient" id="orb-gradient"></div>\n              <div class="va-widget-orb-inner"></div>\n              <div class="va-widget-orb-dot" id="orb-dot"></div>\n            </div>\n            <span id="button-text">${this.buttonText}</span>\n          </button>\n          <div class="va-widget-branding">\n            Powered by <a href="https://voicenoob.com" target="_blank" rel="noopener noreferrer">Voice Noob</a>\n          </div>\n        </div>\n      </div>\n    `,null==(t=this.shadow.getElementById("toggle"))||t.addEventListener("click",()=>this.toggle())}toggle(){this.isOpen=!this.isOpen;const t=this.shadow.getElementById("popup"),n=this.shadow.getElementById("button-text"),e=this.shadow.getElementById("orb-gradient"),a=this.shadow.getElementById("orb-dot"),i=null==t?void 0:t.querySelector("iframe");t&&t.classList.toggle("open",this.isOpen),n&&(n.textContent=this.isOpen?"Close":this.buttonText),e&&e.classList.toggle("animated",this.isOpen),a&&a.classList.toggle("active",this.isOpen),this.isOpen&&(null==i?void 0:i.contentWindow)&&i.contentWindow.postMessage({type:"voice-agent:start"},"*"),this.isOpen||this.updateState("idle")}updateState(t){this.currentState=t;const n=this.shadow.getElementById("toggle");n&&(n.classList.remove("state-idle","state-listening","state-thinking","state-speaking"),"idle"!==t&&n.classList.add(`state-${t}`))}handleMessage(t){const n=t.data;if(n&&"object"==typeof n)if("voice-agent:close"!==n.type){if("voice-agent:state"===n.type){const t=n.state;return void(["idle","listening","thinking","speaking"].includes(t)&&this.updateState(t))}if("voice-agent:audio-level"===n.type){const t=n.level;this.updateAudioLevel(t)}}else this.isOpen&&this.toggle()}updateAudioLevel(t){const n=this.shadow.getElementById("orb"),e=this.shadow.getElementById("toggle");if(n&&this.isOpen){const e=1+.2*t;n.style.transform=`scale(${e})`}if(e&&this.isOpen&&"speaking"===this.currentState){const n=12+12*t,a=.4+.4*t;e.style.boxShadow=`0 4px 24px rgba(0, 0, 0, 0.15), 0 0 ${n}px ${n/2}px rgba(59, 130, 246, ${a})`}}}return customElements.get("voice-agent")||customElements.define("voice-agent",e),t.VoiceAgentElement=e,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t}({});
//# sourceMappingURL=widget.js.map
